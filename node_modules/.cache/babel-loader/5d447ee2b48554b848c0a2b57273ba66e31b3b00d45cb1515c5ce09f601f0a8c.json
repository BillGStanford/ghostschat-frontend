{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\natol\\\\OneDrive\\\\Desktop\\\\ghostschat\\\\ghostschat-frontend\\\\src\\\\components\\\\CallRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Mic, MicOff, Users, Phone, PhoneOff, Volume2, VolumeX, Settings, Wifi, WifiOff, User, UserX, Clock, Signal, AlertCircle, Check, ChevronUp, ChevronDown, MoreVertical, Copy, UserPlus, Shield } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CallRoom = ({\n  socket,\n  roomId,\n  username,\n  users,\n  callState\n}) => {\n  _s();\n  const [participants, setParticipants] = useState([]);\n  const [leftParticipants, setLeftParticipants] = useState([]);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isDeafened, setIsDeafened] = useState(false);\n  const [speakingUsers, setSpeakingUsers] = useState(new Set());\n  const [mutedUsers, setMutedUsers] = useState(new Set());\n  const [connectionQuality, setConnectionQuality] = useState({});\n  const [callStartTime, setCallStartTime] = useState(null);\n  const [callDuration, setCallDuration] = useState(0);\n  const [showParticipantsList, setShowParticipantsList] = useState(false);\n  const [showCallInfo, setShowCallInfo] = useState(false);\n  const [audioLevels, setAudioLevels] = useState({});\n  const [networkStats, setNetworkStats] = useState({});\n  const [showSettings, setShowSettings] = useState(false);\n  const [micSensitivity, setMicSensitivity] = useState(15);\n  const [outputVolume, setOutputVolume] = useState(100);\n  const userAudio = useRef(null);\n  const peersRef = useRef([]);\n  const streamRef = useRef(null);\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const speakingTimeoutRef = useRef({});\n  const audioLevelTimeoutRef = useRef({});\n  const currentTheme = {\n    card: 'bg-gray-900',\n    textPrimary: 'text-white',\n    textSecondary: 'text-gray-300',\n    border: 'border-gray-700',\n    accent: 'bg-indigo-600'\n  };\n\n  // Generate profile picture from username\n  const generateProfilePicture = username => {\n    const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57', '#FF9FF3', '#54A0FF', '#5F27CD', '#00D2D3', '#FF9F43', '#6C5CE7', '#FD79A8', '#FDCB6E', '#6C5CE7', '#A29BFE'];\n    const firstLetter = (username === null || username === void 0 ? void 0 : username.charAt(0).toUpperCase()) || '?';\n    const colorIndex = username ? username.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0) % colors.length : 0;\n    return {\n      letter: firstLetter,\n      color: colors[colorIndex]\n    };\n  };\n\n  // Enhanced voice activity detection with audio levels\n  const setupVoiceActivityDetection = useCallback((stream, peerID) => {\n    try {\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      const analyser = audioContext.createAnalyser();\n      const microphone = audioContext.createMediaStreamSource(stream);\n      analyser.fftSize = 1024;\n      analyser.minDecibels = -90;\n      analyser.maxDecibels = -10;\n      analyser.smoothingTimeConstant = 0.85;\n      microphone.connect(analyser);\n      const bufferLength = analyser.frequencyBinCount;\n      const dataArray = new Uint8Array(bufferLength);\n      const checkAudioLevel = () => {\n        analyser.getByteFrequencyData(dataArray);\n        const average = dataArray.reduce((a, b) => a + b) / bufferLength;\n        const normalizedLevel = Math.min(100, Math.max(0, average / 128 * 100));\n\n        // Update audio levels for visualization\n        setAudioLevels(prev => ({\n          ...prev,\n          [peerID]: normalizedLevel\n        }));\n\n        // Clear audio level after inactivity\n        if (audioLevelTimeoutRef.current[peerID]) {\n          clearTimeout(audioLevelTimeoutRef.current[peerID]);\n        }\n        audioLevelTimeoutRef.current[peerID] = setTimeout(() => {\n          setAudioLevels(prev => ({\n            ...prev,\n            [peerID]: 0\n          }));\n        }, 100);\n\n        // Speaking detection\n        if (average > micSensitivity && !mutedUsers.has(peerID)) {\n          setSpeakingUsers(prev => new Set([...prev, peerID]));\n          if (speakingTimeoutRef.current[peerID]) {\n            clearTimeout(speakingTimeoutRef.current[peerID]);\n          }\n          speakingTimeoutRef.current[peerID] = setTimeout(() => {\n            setSpeakingUsers(prev => {\n              const newSet = new Set(prev);\n              newSet.delete(peerID);\n              return newSet;\n            });\n          }, 500);\n        }\n        if (audioContext.state !== 'closed') {\n          requestAnimationFrame(checkAudioLevel);\n        }\n      };\n      checkAudioLevel();\n      return () => {\n        microphone.disconnect();\n        audioContext.close();\n      };\n    } catch (err) {\n      console.error('Voice activity detection setup failed:', err);\n    }\n  }, [micSensitivity, mutedUsers]);\n\n  // Monitor network quality\n  const monitorNetworkQuality = useCallback((peer, peerID) => {\n    const interval = setInterval(async () => {\n      try {\n        const stats = await peer.getStats();\n        let bytesReceived = 0;\n        let bytesSent = 0;\n        let packetsLost = 0;\n        let packetsReceived = 0;\n        stats.forEach(report => {\n          if (report.type === 'inbound-rtp' && report.kind === 'audio') {\n            bytesReceived += report.bytesReceived || 0;\n            packetsLost += report.packetsLost || 0;\n            packetsReceived += report.packetsReceived || 0;\n          } else if (report.type === 'outbound-rtp' && report.kind === 'audio') {\n            bytesSent += report.bytesSent || 0;\n          }\n        });\n        const packetLossRate = packetsReceived > 0 ? packetsLost / packetsReceived * 100 : 0;\n        let quality = 'excellent';\n        if (packetLossRate > 5) quality = 'poor';else if (packetLossRate > 2) quality = 'fair';else if (packetLossRate > 0.5) quality = 'good';\n        setNetworkStats(prev => ({\n          ...prev,\n          [peerID]: {\n            bytesReceived,\n            bytesSent,\n            packetsLost,\n            packetsReceived,\n            packetLossRate: packetLossRate.toFixed(1),\n            quality\n          }\n        }));\n        setConnectionQuality(prev => ({\n          ...prev,\n          [peerID]: quality\n        }));\n      } catch (err) {\n        console.error('Network monitoring error:', err);\n      }\n    }, 2000);\n    peer.networkMonitor = interval;\n  }, []);\n\n  // Handle mute/unmute from other participants\n  const handleParticipantMuted = ({\n    userId,\n    isMuted: muteState\n  }) => {\n    setMutedUsers(prev => {\n      const newSet = new Set(prev);\n      if (muteState) {\n        newSet.add(userId);\n      } else {\n        newSet.delete(userId);\n      }\n      return newSet;\n    });\n  };\n\n  // Cleanup a specific peer\n  const cleanupPeer = useCallback(peerID => {\n    const peerObj = peersRef.current.find(p => p.peerID === peerID);\n    if (peerObj) {\n      if (peerObj.peer.networkMonitor) {\n        clearInterval(peerObj.peer.networkMonitor);\n      }\n      peerObj.peer.destroy();\n      peersRef.current = peersRef.current.filter(p => p.peerID !== peerID);\n    }\n\n    // Clear timeouts\n    if (speakingTimeoutRef.current[peerID]) {\n      clearTimeout(speakingTimeoutRef.current[peerID]);\n      delete speakingTimeoutRef.current[peerID];\n    }\n    if (audioLevelTimeoutRef.current[peerID]) {\n      clearTimeout(audioLevelTimeoutRef.current[peerID]);\n      delete audioLevelTimeoutRef.current[peerID];\n    }\n\n    // Remove from speaking users\n    setSpeakingUsers(prev => {\n      const newSet = new Set(prev);\n      newSet.delete(peerID);\n      return newSet;\n    });\n\n    // Clean up audio levels\n    setAudioLevels(prev => {\n      const newLevels = {\n        ...prev\n      };\n      delete newLevels[peerID];\n      return newLevels;\n    });\n  }, []);\n\n  // Full cleanup\n  const cleanup = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    peersRef.current.forEach(({\n      peer\n    }) => {\n      if (peer.networkMonitor) {\n        clearInterval(peer.networkMonitor);\n      }\n      peer.destroy();\n    });\n    peersRef.current = [];\n    if (userAudio.current) {\n      userAudio.current.srcObject = null;\n    }\n    if (audioContextRef.current) {\n      audioContextRef.current.close();\n    }\n\n    // Clear all timeouts\n    Object.values(speakingTimeoutRef.current).forEach(timeout => clearTimeout(timeout));\n    Object.values(audioLevelTimeoutRef.current).forEach(timeout => clearTimeout(timeout));\n    speakingTimeoutRef.current = {};\n    audioLevelTimeoutRef.current = {};\n    setSpeakingUsers(new Set());\n    setAudioLevels({});\n  }, []);\n\n  // Create peer connection\n  const createPeer = useCallback((userToSignal, callerID, stream) => {\n    const existingPeer = peersRef.current.find(p => p.peerID === userToSignal);\n    if (existingPeer) return existingPeer.peer;\n    const peer = new (window.SimplePeer || window.Peer)({\n      initiator: true,\n      trickle: true,\n      stream,\n      config: {\n        iceServers: [{\n          urls: 'stun:stun.l.google.com:19302'\n        }, {\n          urls: 'stun:stun1.l.google.com:19302'\n        }, {\n          urls: 'stun:stun2.l.google.com:19302'\n        }, {\n          urls: 'stun:stun3.l.google.com:19302'\n        }, {\n          urls: 'stun:stun4.l.google.com:19302'\n        }]\n      }\n    });\n    peer.on('signal', signal => {\n      socket.emit('callSignal', {\n        roomId,\n        signal,\n        to: userToSignal\n      });\n    });\n    peer.on('connect', () => {\n      console.log('Peer connected:', userToSignal);\n      updateParticipantStatus(userToSignal, 'connected');\n      monitorNetworkQuality(peer, userToSignal);\n    });\n    peer.on('stream', stream => {\n      const audio = document.createElement('audio');\n      audio.srcObject = stream;\n      audio.autoplay = true;\n      audio.volume = isDeafened ? 0 : outputVolume / 100;\n      document.body.appendChild(audio);\n      setupVoiceActivityDetection(stream, userToSignal);\n      peer.audioElement = audio;\n    });\n    peer.on('error', err => {\n      console.error('Peer error:', err);\n      updateParticipantStatus(userToSignal, 'disconnected');\n      setConnectionQuality(prev => ({\n        ...prev,\n        [userToSignal]: 'poor'\n      }));\n      cleanupPeer(userToSignal);\n    });\n    peer.on('close', () => {\n      updateParticipantStatus(userToSignal, 'disconnected');\n      if (peer.audioElement) {\n        document.body.removeChild(peer.audioElement);\n      }\n      cleanupPeer(userToSignal);\n    });\n    return peer;\n  }, [socket, roomId, cleanupPeer, isDeafened, outputVolume, setupVoiceActivityDetection, monitorNetworkQuality]);\n\n  // Add peer connection\n  const addPeer = useCallback((incomingSignal, callerID, stream) => {\n    const existingPeer = peersRef.current.find(p => p.peerID === callerID);\n    if (existingPeer) return existingPeer.peer;\n    const peer = new (window.SimplePeer || window.Peer)({\n      initiator: false,\n      trickle: true,\n      stream,\n      config: {\n        iceServers: [{\n          urls: 'stun:stun.l.google.com:19302'\n        }, {\n          urls: 'stun:stun1.l.google.com:19302'\n        }, {\n          urls: 'stun:stun2.l.google.com:19302'\n        }, {\n          urls: 'stun:stun3.l.google.com:19302'\n        }, {\n          urls: 'stun:stun4.l.google.com:19302'\n        }]\n      }\n    });\n    peer.on('signal', signal => {\n      socket.emit('callSignal', {\n        roomId,\n        signal,\n        to: callerID\n      });\n    });\n    peer.on('connect', () => {\n      console.log('Peer connected:', callerID);\n      updateParticipantStatus(callerID, 'connected');\n      monitorNetworkQuality(peer, callerID);\n    });\n    peer.on('stream', stream => {\n      const audio = document.createElement('audio');\n      audio.srcObject = stream;\n      audio.autoplay = true;\n      audio.volume = isDeafened ? 0 : outputVolume / 100;\n      document.body.appendChild(audio);\n      setupVoiceActivityDetection(stream, callerID);\n      peer.audioElement = audio;\n    });\n    peer.on('error', err => {\n      console.error('Peer error:', err);\n      updateParticipantStatus(callerID, 'disconnected');\n      setConnectionQuality(prev => ({\n        ...prev,\n        [callerID]: 'poor'\n      }));\n      cleanupPeer(callerID);\n    });\n    peer.on('close', () => {\n      updateParticipantStatus(callerID, 'disconnected');\n      if (peer.audioElement) {\n        document.body.removeChild(peer.audioElement);\n      }\n      cleanupPeer(callerID);\n    });\n\n    // Handle signaling with retries\n    const signalWithRetry = (retryCount = 0) => {\n      try {\n        peer.signal(incomingSignal);\n      } catch (err) {\n        console.error('Signaling error, retrying...', err);\n        if (peer.destroyed || retryCount >= 3) return;\n        setTimeout(() => signalWithRetry(retryCount + 1), 1000);\n      }\n    };\n    signalWithRetry();\n    return peer;\n  }, [socket, roomId, cleanupPeer, isDeafened, outputVolume, setupVoiceActivityDetection, monitorNetworkQuality]);\n\n  // Update participant status\n  const updateParticipantStatus = (peerID, status) => {\n    setParticipants(prev => prev.map(p => p.peerID === peerID ? {\n      ...p,\n      connectionStatus: status\n    } : p));\n  };\n\n  // Update all participants\n  const updateAllParticipants = useCallback(() => {\n    if (!callState || !callState.participants) return;\n    const allParticipants = [{\n      peerID: socket.id,\n      username,\n      isSelf: true,\n      connectionStatus: 'connected',\n      joinTime: callStartTime || Date.now()\n    }];\n    callState.participants.forEach(participantId => {\n      if (participantId !== socket.id) {\n        const existingPeer = peersRef.current.find(p => p.peerID === participantId);\n        const existingParticipant = allParticipants.find(p => p.peerID === participantId);\n        if (!existingParticipant) {\n          var _users$find;\n          allParticipants.push({\n            peerID: participantId,\n            username: ((_users$find = users.find(u => u.id === participantId)) === null || _users$find === void 0 ? void 0 : _users$find.username) || 'Unknown',\n            isSelf: false,\n            connectionStatus: existingPeer ? 'connected' : 'connecting',\n            joinTime: Date.now()\n          });\n        }\n      }\n    });\n    setParticipants(allParticipants);\n  }, [socket.id, username, callState, users, callStartTime]);\n\n  // Format time duration\n  const formatDuration = seconds => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor(seconds % 3600 / 60);\n    const secs = seconds % 60;\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Get connection quality indicators\n  const getConnectionQualityColor = quality => {\n    switch (quality) {\n      case 'excellent':\n        return '#22c55e';\n      case 'good':\n        return '#84cc16';\n      case 'fair':\n        return '#f59e0b';\n      case 'poor':\n        return '#ef4444';\n      default:\n        return '#6b7280';\n    }\n  };\n  const getConnectionQualityIcon = quality => {\n    switch (quality) {\n      case 'excellent':\n        return /*#__PURE__*/_jsxDEV(Signal, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 32\n        }, this);\n      case 'good':\n        return /*#__PURE__*/_jsxDEV(Signal, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 27\n        }, this);\n      case 'fair':\n        return /*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 27\n        }, this);\n      case 'poor':\n        return /*#__PURE__*/_jsxDEV(WifiOff, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 27\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Signal, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 23\n        }, this);\n    }\n  };\n\n  // Toggle functions\n  const toggleMute = () => {\n    if (streamRef.current) {\n      const newMuteState = !isMuted;\n      streamRef.current.getAudioTracks().forEach(track => {\n        track.enabled = !newMuteState;\n      });\n      setIsMuted(newMuteState);\n\n      // Notify other participants\n      socket.emit('participantMuted', {\n        roomId,\n        isMuted: newMuteState\n      });\n\n      // Update local muted users\n      setMutedUsers(prev => {\n        const newSet = new Set(prev);\n        if (newMuteState) {\n          newSet.add(socket.id);\n        } else {\n          newSet.delete(socket.id);\n        }\n        return newSet;\n      });\n    }\n  };\n  const toggleDeafen = () => {\n    const newDeafenState = !isDeafened;\n    setIsDeafened(newDeafenState);\n    if (newDeafenState) {\n      setIsMuted(true);\n      if (streamRef.current) {\n        streamRef.current.getAudioTracks().forEach(track => {\n          track.enabled = false;\n        });\n      }\n      setMutedUsers(prev => new Set([...prev, socket.id]));\n    }\n  };\n  const leaveCall = () => {\n    socket.emit('leaveCall', {\n      roomId\n    });\n    cleanup();\n  };\n  const copyRoomId = () => {\n    navigator.clipboard.writeText(roomId);\n  };\n\n  // Initialize call\n  useEffect(() => {\n    const initCall = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          audio: {\n            echoCancellation: true,\n            noiseSuppression: true,\n            autoGainControl: true,\n            sampleRate: 44100\n          }\n        });\n        streamRef.current = stream;\n        if (userAudio.current) {\n          userAudio.current.srcObject = stream;\n        }\n        setupVoiceActivityDetection(stream, socket.id);\n        updateAllParticipants();\n        setCallStartTime(Date.now());\n        if (callState && callState.participants) {\n          callState.participants.filter(participantId => participantId !== socket.id).forEach(participantId => {\n            var _users$find2;\n            const peer = createPeer(participantId, socket.id, stream);\n            peersRef.current.push({\n              peerID: participantId,\n              peer,\n              username: ((_users$find2 = users.find(u => u.id === participantId)) === null || _users$find2 === void 0 ? void 0 : _users$find2.username) || 'Unknown'\n            });\n          });\n        }\n      } catch (err) {\n        console.error('Error accessing media devices:', err);\n      }\n    };\n    const handleCallSignal = ({\n      signal,\n      from\n    }) => {\n      if (!streamRef.current) return;\n      const peerObj = peersRef.current.find(p => p.peerID === from);\n      if (peerObj) {\n        try {\n          peerObj.peer.signal(signal);\n        } catch (err) {\n          console.error('Error signaling existing peer:', err);\n          updateParticipantStatus(from, 'disconnected');\n          cleanupPeer(from);\n        }\n      } else {\n        var _users$find3;\n        const peer = addPeer(signal, from, streamRef.current);\n        peersRef.current.push({\n          peerID: from,\n          peer,\n          username: ((_users$find3 = users.find(u => u.id === from)) === null || _users$find3 === void 0 ? void 0 : _users$find3.username) || 'Unknown'\n        });\n      }\n      updateAllParticipants();\n    };\n    const handleParticipantJoined = ({\n      userId,\n      username: joinedUsername\n    }) => {\n      if (userId !== socket.id && streamRef.current) {\n        const peer = createPeer(userId, socket.id, streamRef.current);\n        peersRef.current.push({\n          peerID: userId,\n          peer,\n          username: joinedUsername\n        });\n      }\n      updateAllParticipants();\n    };\n    const handleParticipantLeft = ({\n      userId,\n      username: leftUsername\n    }) => {\n      cleanupPeer(userId);\n      updateParticipantStatus(userId, 'left');\n\n      // Add to left participants list\n      setLeftParticipants(prev => {\n        var _users$find4;\n        return [...prev.filter(p => p.peerID !== userId), {\n          peerID: userId,\n          username: leftUsername || ((_users$find4 = users.find(u => u.id === userId)) === null || _users$find4 === void 0 ? void 0 : _users$find4.username) || 'Unknown',\n          leftTime: Date.now()\n        }];\n      });\n    };\n    const handleCallEnded = () => {\n      cleanup();\n      setCallStartTime(null);\n      setCallDuration(0);\n      setLeftParticipants([]);\n    };\n    initCall();\n    socket.on('callSignal', handleCallSignal);\n    socket.on('callParticipantJoined', handleParticipantJoined);\n    socket.on('callParticipantLeft', handleParticipantLeft);\n    socket.on('callEnded', handleCallEnded);\n    socket.on('participantMuted', handleParticipantMuted);\n    const interval = setInterval(updateAllParticipants, 5000);\n    return () => {\n      cleanup();\n      clearInterval(interval);\n      socket.off('callSignal', handleCallSignal);\n      socket.off('callParticipantJoined', handleParticipantJoined);\n      socket.off('callParticipantLeft', handleParticipantLeft);\n      socket.off('callEnded', handleCallEnded);\n      socket.off('participantMuted', handleParticipantMuted);\n    };\n  }, [socket, roomId, callState, users, createPeer, addPeer, cleanup, cleanupPeer, updateAllParticipants, setupVoiceActivityDetection]);\n\n  // Update call duration\n  useEffect(() => {\n    if (!callStartTime) return;\n    const interval = setInterval(() => {\n      setCallDuration(Math.floor((Date.now() - callStartTime) / 1000));\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [callStartTime]);\n\n  // Update audio volumes\n  useEffect(() => {\n    peersRef.current.forEach(({\n      peer\n    }) => {\n      if (peer.audioElement) {\n        peer.audioElement.volume = isDeafened ? 0 : outputVolume / 100;\n      }\n    });\n  }, [isDeafened, outputVolume]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex-1 ${currentTheme.card} overflow-hidden flex flex-col relative`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-b border-gray-700 relative\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(Phone, {\n                className: \"w-5 h-5 text-green-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: `text-lg font-bold ${currentTheme.textPrimary} gradient-text`,\n                children: \"Voice Call\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 652,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-400\",\n                children: [\"Room: \", roomId]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 655,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 13\n          }, this), callStartTime && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2 text-sm text-gray-400\",\n            children: [/*#__PURE__*/_jsxDEV(Clock, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formatDuration(callDuration)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowParticipantsList(!showParticipantsList),\n            className: \"flex items-center space-x-2 px-3 py-1 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(Users, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm\",\n              children: participants.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 15\n            }, this), showParticipantsList ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 39\n            }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 75\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: copyRoomId,\n            className: \"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors\",\n            title: \"Copy Room ID\",\n            children: /*#__PURE__*/_jsxDEV(Copy, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowSettings(!showSettings),\n            className: \"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(Settings, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 7\n    }, this), showSettings && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-full left-0 right-0 bg-gray-800 border-b border-gray-700 p-4 z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-300 mb-2\",\n            children: \"Microphone Sensitivity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"5\",\n            max: \"50\",\n            value: micSensitivity,\n            onChange: e => setMicSensitivity(parseInt(e.target.value)),\n            className: \"w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 705,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-400\",\n            children: [\"Current: \", micSensitivity]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-300 mb-2\",\n            children: \"Output Volume\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: \"100\",\n            value: outputVolume,\n            onChange: e => setOutputVolume(parseInt(e.target.value)),\n            className: \"w-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-400\",\n            children: [\"Current: \", outputVolume, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 700,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 699,\n      columnNumber: 9\n    }, this), showParticipantsList && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b border-gray-700 bg-gray-800/50 p-4 max-h-40 overflow-y-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [participants.map(({\n          peerID,\n          username: participantUsername,\n          isSelf,\n          connectionStatus\n        }) => {\n          const profilePic = generateProfilePicture(participantUsername);\n          const isSpeaking = speakingUsers.has(peerID);\n          const isMutedUser = mutedUsers.has(peerID);\n          const audioLevel = audioLevels[peerID] || 0;\n          const quality = connectionQuality[peerID] || 'good';\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-700/50\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white\n                        ${isSpeaking ? 'ring-2 ring-green-400' : ''}\n                      `,\n                style: {\n                  backgroundColor: profilePic.color\n                },\n                children: profilePic.letter\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 21\n              }, this), isMutedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute -bottom-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(MicOff, {\n                  className: \"w-2 h-2 text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 758,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 757,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 min-w-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `text-sm font-medium ${currentTheme.textPrimary} truncate`,\n                  children: [participantUsername, isSelf && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-blue-400 ml-1\",\n                    children: \"(You)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 767,\n                    columnNumber: 36\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 765,\n                  columnNumber: 23\n                }, this), isSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-2 h-2 bg-green-400 rounded-full animate-pulse\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 771,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-green-400\",\n                    children: \"Speaking\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 772,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 770,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 764,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 mt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-16 h-1 bg-gray-600 rounded-full overflow-hidden\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-full bg-green-400 transition-all duration-150 ease-out\",\n                    style: {\n                      width: `${audioLevel}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 780,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 779,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-400\",\n                  children: [Math.round(audioLevel), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 785,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 763,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1\",\n                style: {\n                  color: getConnectionQualityColor(quality)\n                },\n                title: `Connection: ${quality}`,\n                children: [getConnectionQualityIcon(quality), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs capitalize\",\n                  children: quality\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 796,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 790,\n                columnNumber: 21\n              }, this), networkStats[peerID] && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-400\",\n                title: `Packet Loss: ${networkStats[peerID].packetLossRate}%`,\n                children: [networkStats[peerID].packetLossRate, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 800,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 19\n            }, this)]\n          }, peerID, true, {\n            fileName: _jsxFileName,\n            lineNumber: 746,\n            columnNumber: 17\n          }, this);\n        }), leftParticipants.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border-t border-gray-600 pt-2 mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-400 mb-2 flex items-center space-x-1\",\n            children: [/*#__PURE__*/_jsxDEV(UserX, {\n              className: \"w-3 h-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Left the call\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 814,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 17\n          }, this), leftParticipants.slice(-3).map(({\n            peerID,\n            username: leftUsername,\n            leftTime\n          }) => {\n            const profilePic = generateProfilePicture(leftUsername);\n            const timeAgo = Math.floor((Date.now() - leftTime) / 1000);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3 p-2 rounded-lg opacity-60\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white opacity-50\",\n                style: {\n                  backgroundColor: profilePic.color\n                },\n                children: profilePic.letter\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 822,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-400 truncate\",\n                  children: leftUsername\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 829,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: [\"Left \", timeAgo < 60 ? `${timeAgo}s ago` : `${Math.floor(timeAgo / 60)}m ago`]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 830,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 828,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(UserX, {\n                className: \"w-4 h-4 text-gray-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 834,\n                columnNumber: 23\n              }, this)]\n            }, `left-${peerID}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 821,\n              columnNumber: 21\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 737,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 736,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 p-4 overflow-y-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\",\n        children: participants.map(({\n          peerID,\n          username: participantUsername,\n          isSelf,\n          connectionStatus\n        }) => {\n          const profilePic = generateProfilePicture(participantUsername);\n          const isSpeaking = speakingUsers.has(peerID);\n          const isMutedUser = mutedUsers.has(peerID);\n          const audioLevel = audioLevels[peerID] || 0;\n          const quality = connectionQuality[peerID] || 'good';\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `\n                  relative p-6 rounded-xl transition-all duration-200 border-2 backdrop-blur-sm\n                  ${isSpeaking ? 'border-green-400 bg-green-900/20 shadow-lg shadow-green-400/20 scale-105' : 'border-gray-600 bg-gray-800/50 hover:bg-gray-800/70'}\n                  ${isSelf ? 'ring-2 ring-blue-400' : ''}\n                  hover:border-gray-500 transition-all duration-200\n                `,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `\n                        w-20 h-20 rounded-full flex items-center justify-center text-2xl font-bold text-white\n                        ${isSpeaking ? 'ring-4 ring-green-400 ring-opacity-75 animate-pulse' : ''}\n                        transition-all duration-200 shadow-lg\n                      `,\n                  style: {\n                    backgroundColor: profilePic.color\n                  },\n                  children: profilePic.letter\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 870,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center shadow-lg\",\n                  style: {\n                    backgroundColor: getConnectionQualityColor(quality)\n                  },\n                  title: `Connection: ${quality}`,\n                  children: getConnectionQualityIcon(quality)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 882,\n                  columnNumber: 21\n                }, this), isMutedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute -bottom-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg\",\n                  children: /*#__PURE__*/_jsxDEV(MicOff, {\n                    className: \"w-3 h-3 text-white\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 893,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 892,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 869,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${currentTheme.textPrimary} font-medium text-sm mb-1`,\n                  children: [participantUsername, isSelf && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-blue-400 ml-1\",\n                    children: \"(You)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 902,\n                    columnNumber: 34\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 900,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-center space-x-2 mb-2\",\n                  children: [isSpeaking && !isMutedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-1 text-green-400\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-2 h-2 bg-green-400 rounded-full animate-pulse\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 909,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs font-medium\",\n                      children: \"Speaking\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 910,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 908,\n                    columnNumber: 25\n                  }, this), isMutedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-1 text-red-400\",\n                    children: [/*#__PURE__*/_jsxDEV(MicOff, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 915,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs font-medium\",\n                      children: \"Muted\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 916,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 914,\n                    columnNumber: 25\n                  }, this), !isSpeaking && !isMutedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-1 text-gray-400\",\n                    children: [/*#__PURE__*/_jsxDEV(Mic, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 921,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs\",\n                      children: \"Listening\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 922,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 920,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 906,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center space-x-1 mb-1\",\n                    children: [...Array(5)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: `\n                              w-1 h-3 rounded-full transition-all duration-150\n                              ${audioLevel > (i + 1) * 20 ? isSpeaking ? 'bg-green-400' : 'bg-blue-400' : 'bg-gray-600'}\n                            `,\n                      style: {\n                        height: audioLevel > (i + 1) * 20 ? `${8 + i * 2}px` : '4px'\n                      }\n                    }, i, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 931,\n                      columnNumber: 27\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 929,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-400\",\n                    children: [Math.round(audioLevel), \"% \\u2022 \", quality]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 946,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 928,\n                  columnNumber: 21\n                }, this), networkStats[peerID] && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 mt-1\",\n                  children: [\"Loss: \", networkStats[peerID].packetLossRate, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 953,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 899,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 17\n            }, this), isSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute inset-0 rounded-xl\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 bg-green-400/10 rounded-xl animate-pulse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 963,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full h-full bg-green-400 rounded-full animate-ping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 965,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 964,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 962,\n              columnNumber: 19\n            }, this)]\n          }, `${peerID}-${participantUsername}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 846,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 845,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-t border-gray-700 bg-gray-800/50 backdrop-blur-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleMute,\n          className: `\n              p-4 rounded-full transition-all duration-200 flex items-center space-x-2 shadow-lg\n              ${isMuted ? 'bg-red-500 hover:bg-red-600 text-white shadow-red-500/25' : 'bg-gray-700 hover:bg-gray-600 text-gray-200 shadow-gray-700/25'}\n              hover:scale-105 active:scale-95\n            `,\n          title: isMuted ? 'Unmute' : 'Mute',\n          children: isMuted ? /*#__PURE__*/_jsxDEV(MicOff, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 990,\n            columnNumber: 24\n          }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 990,\n            columnNumber: 57\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 978,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleDeafen,\n          className: `\n              p-4 rounded-full transition-all duration-200 flex items-center space-x-2 shadow-lg\n              ${isDeafened ? 'bg-red-500 hover:bg-red-600 text-white shadow-red-500/25' : 'bg-gray-700 hover:bg-gray-600 text-gray-200 shadow-gray-700/25'}\n              hover:scale-105 active:scale-95\n            `,\n          title: isDeafened ? 'Undeafen' : 'Deafen',\n          children: isDeafened ? /*#__PURE__*/_jsxDEV(VolumeX, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1005,\n            columnNumber: 27\n          }, this) : /*#__PURE__*/_jsxDEV(Volume2, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1005,\n            columnNumber: 61\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 993,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: leaveCall,\n          className: \"p-4 bg-red-500 hover:bg-red-600 text-white rounded-full transition-all duration-200 shadow-lg shadow-red-500/25 hover:scale-105 active:scale-95\",\n          title: \"Leave Call\",\n          children: /*#__PURE__*/_jsxDEV(PhoneOff, {\n            className: \"w-6 h-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1013,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1008,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 977,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center space-x-16 mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-400 font-medium\",\n            children: isMuted ? 'Unmute' : 'Mute'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1020,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500\",\n            children: isMuted ? 'Ctrl+M' : 'Ctrl+M'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1023,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1019,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-400 font-medium\",\n            children: isDeafened ? 'Undeafen' : 'Deafen'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1028,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500\",\n            children: isDeafened ? 'Ctrl+D' : 'Ctrl+D'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1031,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1027,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-400 font-medium\",\n            children: \"Leave\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500\",\n            children: \"Ctrl+L\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1039,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1035,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1018,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center space-x-6 mt-3 text-xs text-gray-400\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            className: \"w-3 h-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1048,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [participants.length, \" participants\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1049,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1047,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(Clock, {\n            className: \"w-3 h-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1052,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: formatDuration(callDuration)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1053,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1051,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(Signal, {\n            className: \"w-3 h-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1056,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Quality: \", Object.values(connectionQuality).filter(q => q === 'excellent' || q === 'good').length, \"/\", participants.length - 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1057,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1055,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1046,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 976,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: userAudio,\n      autoPlay: true,\n      muted: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1063,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 641,\n    columnNumber: 5\n  }, this);\n};\n_s(CallRoom, \"r2YnhDCTA12hMf8TTzyKA+Ql7cw=\");\n_c = CallRoom;\nexport default CallRoom;\nvar _c;\n$RefreshReg$(_c, \"CallRoom\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Mic","MicOff","Users","Phone","PhoneOff","Volume2","VolumeX","Settings","Wifi","WifiOff","User","UserX","Clock","Signal","AlertCircle","Check","ChevronUp","ChevronDown","MoreVertical","Copy","UserPlus","Shield","jsxDEV","_jsxDEV","CallRoom","socket","roomId","username","users","callState","_s","participants","setParticipants","leftParticipants","setLeftParticipants","isMuted","setIsMuted","isDeafened","setIsDeafened","speakingUsers","setSpeakingUsers","Set","mutedUsers","setMutedUsers","connectionQuality","setConnectionQuality","callStartTime","setCallStartTime","callDuration","setCallDuration","showParticipantsList","setShowParticipantsList","showCallInfo","setShowCallInfo","audioLevels","setAudioLevels","networkStats","setNetworkStats","showSettings","setShowSettings","micSensitivity","setMicSensitivity","outputVolume","setOutputVolume","userAudio","peersRef","streamRef","audioContextRef","analyserRef","speakingTimeoutRef","audioLevelTimeoutRef","currentTheme","card","textPrimary","textSecondary","border","accent","generateProfilePicture","colors","firstLetter","charAt","toUpperCase","colorIndex","split","reduce","acc","char","charCodeAt","length","letter","color","setupVoiceActivityDetection","stream","peerID","audioContext","window","AudioContext","webkitAudioContext","analyser","createAnalyser","microphone","createMediaStreamSource","fftSize","minDecibels","maxDecibels","smoothingTimeConstant","connect","bufferLength","frequencyBinCount","dataArray","Uint8Array","checkAudioLevel","getByteFrequencyData","average","a","b","normalizedLevel","Math","min","max","prev","current","clearTimeout","setTimeout","has","newSet","delete","state","requestAnimationFrame","disconnect","close","err","console","error","monitorNetworkQuality","peer","interval","setInterval","stats","getStats","bytesReceived","bytesSent","packetsLost","packetsReceived","forEach","report","type","kind","packetLossRate","quality","toFixed","networkMonitor","handleParticipantMuted","userId","muteState","add","cleanupPeer","peerObj","find","p","clearInterval","destroy","filter","newLevels","cleanup","getTracks","track","stop","srcObject","Object","values","timeout","createPeer","userToSignal","callerID","existingPeer","SimplePeer","Peer","initiator","trickle","config","iceServers","urls","on","signal","emit","to","log","updateParticipantStatus","audio","document","createElement","autoplay","volume","body","appendChild","audioElement","removeChild","addPeer","incomingSignal","signalWithRetry","retryCount","destroyed","status","map","connectionStatus","updateAllParticipants","allParticipants","id","isSelf","joinTime","Date","now","participantId","existingParticipant","_users$find","push","u","formatDuration","seconds","hours","floor","minutes","secs","toString","padStart","getConnectionQualityColor","getConnectionQualityIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","toggleMute","newMuteState","getAudioTracks","enabled","toggleDeafen","newDeafenState","leaveCall","copyRoomId","navigator","clipboard","writeText","initCall","mediaDevices","getUserMedia","echoCancellation","noiseSuppression","autoGainControl","sampleRate","_users$find2","handleCallSignal","from","_users$find3","handleParticipantJoined","joinedUsername","handleParticipantLeft","leftUsername","_users$find4","leftTime","handleCallEnded","off","children","onClick","title","value","onChange","e","parseInt","target","participantUsername","profilePic","isSpeaking","isMutedUser","audioLevel","style","backgroundColor","width","round","slice","timeAgo","Array","_","i","height","q","ref","autoPlay","muted","_c","$RefreshReg$"],"sources":["C:/Users/natol/OneDrive/Desktop/ghostschat/ghostschat-frontend/src/components/CallRoom.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { \r\n  Mic, MicOff, Users, Phone, PhoneOff, Volume2, VolumeX, Settings, \r\n  Wifi, WifiOff, User, UserX, Clock, Signal, AlertCircle, Check,\r\n  ChevronUp, ChevronDown, MoreVertical, Copy, UserPlus, Shield\r\n} from 'lucide-react';\r\n\r\nconst CallRoom = ({ socket, roomId, username, users, callState }) => {\r\n  const [participants, setParticipants] = useState([]);\r\n  const [leftParticipants, setLeftParticipants] = useState([]);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isDeafened, setIsDeafened] = useState(false);\r\n  const [speakingUsers, setSpeakingUsers] = useState(new Set());\r\n  const [mutedUsers, setMutedUsers] = useState(new Set());\r\n  const [connectionQuality, setConnectionQuality] = useState({});\r\n  const [callStartTime, setCallStartTime] = useState(null);\r\n  const [callDuration, setCallDuration] = useState(0);\r\n  const [showParticipantsList, setShowParticipantsList] = useState(false);\r\n  const [showCallInfo, setShowCallInfo] = useState(false);\r\n  const [audioLevels, setAudioLevels] = useState({});\r\n  const [networkStats, setNetworkStats] = useState({});\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [micSensitivity, setMicSensitivity] = useState(15);\r\n  const [outputVolume, setOutputVolume] = useState(100);\r\n  \r\n  const userAudio = useRef(null);\r\n  const peersRef = useRef([]);\r\n  const streamRef = useRef(null);\r\n  const audioContextRef = useRef(null);\r\n  const analyserRef = useRef(null);\r\n  const speakingTimeoutRef = useRef({});\r\n  const audioLevelTimeoutRef = useRef({});\r\n  const currentTheme = {\r\n    card: 'bg-gray-900',\r\n    textPrimary: 'text-white',\r\n    textSecondary: 'text-gray-300',\r\n    border: 'border-gray-700',\r\n    accent: 'bg-indigo-600'\r\n  };\r\n\r\n  // Generate profile picture from username\r\n  const generateProfilePicture = (username) => {\r\n    const colors = [\r\n      '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57',\r\n      '#FF9FF3', '#54A0FF', '#5F27CD', '#00D2D3', '#FF9F43',\r\n      '#6C5CE7', '#FD79A8', '#FDCB6E', '#6C5CE7', '#A29BFE'\r\n    ];\r\n    const firstLetter = username?.charAt(0).toUpperCase() || '?';\r\n    const colorIndex = username ? username.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0) % colors.length : 0;\r\n    return { letter: firstLetter, color: colors[colorIndex] };\r\n  };\r\n\r\n  // Enhanced voice activity detection with audio levels\r\n  const setupVoiceActivityDetection = useCallback((stream, peerID) => {\r\n    try {\r\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n      const analyser = audioContext.createAnalyser();\r\n      const microphone = audioContext.createMediaStreamSource(stream);\r\n      \r\n      analyser.fftSize = 1024;\r\n      analyser.minDecibels = -90;\r\n      analyser.maxDecibels = -10;\r\n      analyser.smoothingTimeConstant = 0.85;\r\n      \r\n      microphone.connect(analyser);\r\n      \r\n      const bufferLength = analyser.frequencyBinCount;\r\n      const dataArray = new Uint8Array(bufferLength);\r\n      \r\n      const checkAudioLevel = () => {\r\n        analyser.getByteFrequencyData(dataArray);\r\n        const average = dataArray.reduce((a, b) => a + b) / bufferLength;\r\n        const normalizedLevel = Math.min(100, Math.max(0, (average / 128) * 100));\r\n        \r\n        // Update audio levels for visualization\r\n        setAudioLevels(prev => ({ ...prev, [peerID]: normalizedLevel }));\r\n        \r\n        // Clear audio level after inactivity\r\n        if (audioLevelTimeoutRef.current[peerID]) {\r\n          clearTimeout(audioLevelTimeoutRef.current[peerID]);\r\n        }\r\n        audioLevelTimeoutRef.current[peerID] = setTimeout(() => {\r\n          setAudioLevels(prev => ({ ...prev, [peerID]: 0 }));\r\n        }, 100);\r\n        \r\n        // Speaking detection\r\n        if (average > micSensitivity && !mutedUsers.has(peerID)) {\r\n          setSpeakingUsers(prev => new Set([...prev, peerID]));\r\n          \r\n          if (speakingTimeoutRef.current[peerID]) {\r\n            clearTimeout(speakingTimeoutRef.current[peerID]);\r\n          }\r\n          \r\n          speakingTimeoutRef.current[peerID] = setTimeout(() => {\r\n            setSpeakingUsers(prev => {\r\n              const newSet = new Set(prev);\r\n              newSet.delete(peerID);\r\n              return newSet;\r\n            });\r\n          }, 500);\r\n        }\r\n        \r\n        if (audioContext.state !== 'closed') {\r\n          requestAnimationFrame(checkAudioLevel);\r\n        }\r\n      };\r\n      \r\n      checkAudioLevel();\r\n      \r\n      return () => {\r\n        microphone.disconnect();\r\n        audioContext.close();\r\n      };\r\n    } catch (err) {\r\n      console.error('Voice activity detection setup failed:', err);\r\n    }\r\n  }, [micSensitivity, mutedUsers]);\r\n\r\n  // Monitor network quality\r\n  const monitorNetworkQuality = useCallback((peer, peerID) => {\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const stats = await peer.getStats();\r\n        let bytesReceived = 0;\r\n        let bytesSent = 0;\r\n        let packetsLost = 0;\r\n        let packetsReceived = 0;\r\n        \r\n        stats.forEach(report => {\r\n          if (report.type === 'inbound-rtp' && report.kind === 'audio') {\r\n            bytesReceived += report.bytesReceived || 0;\r\n            packetsLost += report.packetsLost || 0;\r\n            packetsReceived += report.packetsReceived || 0;\r\n          } else if (report.type === 'outbound-rtp' && report.kind === 'audio') {\r\n            bytesSent += report.bytesSent || 0;\r\n          }\r\n        });\r\n        \r\n        const packetLossRate = packetsReceived > 0 ? (packetsLost / packetsReceived) * 100 : 0;\r\n        \r\n        let quality = 'excellent';\r\n        if (packetLossRate > 5) quality = 'poor';\r\n        else if (packetLossRate > 2) quality = 'fair';\r\n        else if (packetLossRate > 0.5) quality = 'good';\r\n        \r\n        setNetworkStats(prev => ({\r\n          ...prev,\r\n          [peerID]: {\r\n            bytesReceived,\r\n            bytesSent,\r\n            packetsLost,\r\n            packetsReceived,\r\n            packetLossRate: packetLossRate.toFixed(1),\r\n            quality\r\n          }\r\n        }));\r\n        \r\n        setConnectionQuality(prev => ({ ...prev, [peerID]: quality }));\r\n        \r\n      } catch (err) {\r\n        console.error('Network monitoring error:', err);\r\n      }\r\n    }, 2000);\r\n    \r\n    peer.networkMonitor = interval;\r\n  }, []);\r\n\r\n  // Handle mute/unmute from other participants\r\n  const handleParticipantMuted = ({ userId, isMuted: muteState }) => {\r\n    setMutedUsers(prev => {\r\n      const newSet = new Set(prev);\r\n      if (muteState) {\r\n        newSet.add(userId);\r\n      } else {\r\n        newSet.delete(userId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  // Cleanup a specific peer\r\n  const cleanupPeer = useCallback((peerID) => {\r\n    const peerObj = peersRef.current.find(p => p.peerID === peerID);\r\n    if (peerObj) {\r\n      if (peerObj.peer.networkMonitor) {\r\n        clearInterval(peerObj.peer.networkMonitor);\r\n      }\r\n      peerObj.peer.destroy();\r\n      peersRef.current = peersRef.current.filter(p => p.peerID !== peerID);\r\n    }\r\n    \r\n    // Clear timeouts\r\n    if (speakingTimeoutRef.current[peerID]) {\r\n      clearTimeout(speakingTimeoutRef.current[peerID]);\r\n      delete speakingTimeoutRef.current[peerID];\r\n    }\r\n    \r\n    if (audioLevelTimeoutRef.current[peerID]) {\r\n      clearTimeout(audioLevelTimeoutRef.current[peerID]);\r\n      delete audioLevelTimeoutRef.current[peerID];\r\n    }\r\n    \r\n    // Remove from speaking users\r\n    setSpeakingUsers(prev => {\r\n      const newSet = new Set(prev);\r\n      newSet.delete(peerID);\r\n      return newSet;\r\n    });\r\n    \r\n    // Clean up audio levels\r\n    setAudioLevels(prev => {\r\n      const newLevels = { ...prev };\r\n      delete newLevels[peerID];\r\n      return newLevels;\r\n    });\r\n  }, []);\r\n\r\n  // Full cleanup\r\n  const cleanup = useCallback(() => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    \r\n    peersRef.current.forEach(({ peer }) => {\r\n      if (peer.networkMonitor) {\r\n        clearInterval(peer.networkMonitor);\r\n      }\r\n      peer.destroy();\r\n    });\r\n    peersRef.current = [];\r\n    \r\n    if (userAudio.current) {\r\n      userAudio.current.srcObject = null;\r\n    }\r\n    \r\n    if (audioContextRef.current) {\r\n      audioContextRef.current.close();\r\n    }\r\n    \r\n    // Clear all timeouts\r\n    Object.values(speakingTimeoutRef.current).forEach(timeout => clearTimeout(timeout));\r\n    Object.values(audioLevelTimeoutRef.current).forEach(timeout => clearTimeout(timeout));\r\n    speakingTimeoutRef.current = {};\r\n    audioLevelTimeoutRef.current = {};\r\n    \r\n    setSpeakingUsers(new Set());\r\n    setAudioLevels({});\r\n  }, []);\r\n\r\n  // Create peer connection\r\n  const createPeer = useCallback((userToSignal, callerID, stream) => {\r\n    const existingPeer = peersRef.current.find(p => p.peerID === userToSignal);\r\n    if (existingPeer) return existingPeer.peer;\r\n\r\n    const peer = new (window.SimplePeer || window.Peer)({\r\n      initiator: true,\r\n      trickle: true,\r\n      stream,\r\n      config: {\r\n        iceServers: [\r\n          { urls: 'stun:stun.l.google.com:19302' },\r\n          { urls: 'stun:stun1.l.google.com:19302' },\r\n          { urls: 'stun:stun2.l.google.com:19302' },\r\n          { urls: 'stun:stun3.l.google.com:19302' },\r\n          { urls: 'stun:stun4.l.google.com:19302' }\r\n        ]\r\n      }\r\n    });\r\n\r\n    peer.on('signal', signal => {\r\n      socket.emit('callSignal', { roomId, signal, to: userToSignal });\r\n    });\r\n\r\n    peer.on('connect', () => {\r\n      console.log('Peer connected:', userToSignal);\r\n      updateParticipantStatus(userToSignal, 'connected');\r\n      monitorNetworkQuality(peer, userToSignal);\r\n    });\r\n\r\n    peer.on('stream', stream => {\r\n      const audio = document.createElement('audio');\r\n      audio.srcObject = stream;\r\n      audio.autoplay = true;\r\n      audio.volume = isDeafened ? 0 : (outputVolume / 100);\r\n      document.body.appendChild(audio);\r\n      \r\n      setupVoiceActivityDetection(stream, userToSignal);\r\n      peer.audioElement = audio;\r\n    });\r\n\r\n    peer.on('error', err => {\r\n      console.error('Peer error:', err);\r\n      updateParticipantStatus(userToSignal, 'disconnected');\r\n      setConnectionQuality(prev => ({ ...prev, [userToSignal]: 'poor' }));\r\n      cleanupPeer(userToSignal);\r\n    });\r\n\r\n    peer.on('close', () => {\r\n      updateParticipantStatus(userToSignal, 'disconnected');\r\n      if (peer.audioElement) {\r\n        document.body.removeChild(peer.audioElement);\r\n      }\r\n      cleanupPeer(userToSignal);\r\n    });\r\n\r\n    return peer;\r\n  }, [socket, roomId, cleanupPeer, isDeafened, outputVolume, setupVoiceActivityDetection, monitorNetworkQuality]);\r\n\r\n  // Add peer connection\r\n  const addPeer = useCallback((incomingSignal, callerID, stream) => {\r\n    const existingPeer = peersRef.current.find(p => p.peerID === callerID);\r\n    if (existingPeer) return existingPeer.peer;\r\n\r\n    const peer = new (window.SimplePeer || window.Peer)({\r\n      initiator: false,\r\n      trickle: true,\r\n      stream,\r\n      config: {\r\n        iceServers: [\r\n          { urls: 'stun:stun.l.google.com:19302' },\r\n          { urls: 'stun:stun1.l.google.com:19302' },\r\n          { urls: 'stun:stun2.l.google.com:19302' },\r\n          { urls: 'stun:stun3.l.google.com:19302' },\r\n          { urls: 'stun:stun4.l.google.com:19302' }\r\n        ]\r\n      }\r\n    });\r\n\r\n    peer.on('signal', signal => {\r\n      socket.emit('callSignal', { roomId, signal, to: callerID });\r\n    });\r\n\r\n    peer.on('connect', () => {\r\n      console.log('Peer connected:', callerID);\r\n      updateParticipantStatus(callerID, 'connected');\r\n      monitorNetworkQuality(peer, callerID);\r\n    });\r\n\r\n    peer.on('stream', stream => {\r\n      const audio = document.createElement('audio');\r\n      audio.srcObject = stream;\r\n      audio.autoplay = true;\r\n      audio.volume = isDeafened ? 0 : (outputVolume / 100);\r\n      document.body.appendChild(audio);\r\n      \r\n      setupVoiceActivityDetection(stream, callerID);\r\n      peer.audioElement = audio;\r\n    });\r\n\r\n    peer.on('error', err => {\r\n      console.error('Peer error:', err);\r\n      updateParticipantStatus(callerID, 'disconnected');\r\n      setConnectionQuality(prev => ({ ...prev, [callerID]: 'poor' }));\r\n      cleanupPeer(callerID);\r\n    });\r\n\r\n    peer.on('close', () => {\r\n      updateParticipantStatus(callerID, 'disconnected');\r\n      if (peer.audioElement) {\r\n        document.body.removeChild(peer.audioElement);\r\n      }\r\n      cleanupPeer(callerID);\r\n    });\r\n\r\n    // Handle signaling with retries\r\n    const signalWithRetry = (retryCount = 0) => {\r\n      try {\r\n        peer.signal(incomingSignal);\r\n      } catch (err) {\r\n        console.error('Signaling error, retrying...', err);\r\n        if (peer.destroyed || retryCount >= 3) return;\r\n        setTimeout(() => signalWithRetry(retryCount + 1), 1000);\r\n      }\r\n    };\r\n\r\n    signalWithRetry();\r\n    return peer;\r\n  }, [socket, roomId, cleanupPeer, isDeafened, outputVolume, setupVoiceActivityDetection, monitorNetworkQuality]);\r\n\r\n  // Update participant status\r\n  const updateParticipantStatus = (peerID, status) => {\r\n    setParticipants(prev => prev.map(p => \r\n      p.peerID === peerID ? { ...p, connectionStatus: status } : p\r\n    ));\r\n  };\r\n\r\n  // Update all participants\r\n  const updateAllParticipants = useCallback(() => {\r\n    if (!callState || !callState.participants) return;\r\n    \r\n    const allParticipants = [{ \r\n      peerID: socket.id, \r\n      username,\r\n      isSelf: true,\r\n      connectionStatus: 'connected',\r\n      joinTime: callStartTime || Date.now()\r\n    }];\r\n\r\n    callState.participants.forEach(participantId => {\r\n      if (participantId !== socket.id) {\r\n        const existingPeer = peersRef.current.find(p => p.peerID === participantId);\r\n        const existingParticipant = allParticipants.find(p => p.peerID === participantId);\r\n        \r\n        if (!existingParticipant) {\r\n          allParticipants.push({\r\n            peerID: participantId,\r\n            username: users.find(u => u.id === participantId)?.username || 'Unknown',\r\n            isSelf: false,\r\n            connectionStatus: existingPeer ? 'connected' : 'connecting',\r\n            joinTime: Date.now()\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    setParticipants(allParticipants);\r\n  }, [socket.id, username, callState, users, callStartTime]);\r\n\r\n  // Format time duration\r\n  const formatDuration = (seconds) => {\r\n    const hours = Math.floor(seconds / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    const secs = seconds % 60;\r\n    \r\n    if (hours > 0) {\r\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  // Get connection quality indicators\r\n  const getConnectionQualityColor = (quality) => {\r\n    switch (quality) {\r\n      case 'excellent': return '#22c55e';\r\n      case 'good': return '#84cc16';\r\n      case 'fair': return '#f59e0b';\r\n      case 'poor': return '#ef4444';\r\n      default: return '#6b7280';\r\n    }\r\n  };\r\n\r\n  const getConnectionQualityIcon = (quality) => {\r\n    switch (quality) {\r\n      case 'excellent': return <Signal className=\"w-4 h-4\" />;\r\n      case 'good': return <Signal className=\"w-4 h-4\" />;\r\n      case 'fair': return <AlertCircle className=\"w-4 h-4\" />;\r\n      case 'poor': return <WifiOff className=\"w-4 h-4\" />;\r\n      default: return <Signal className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  // Toggle functions\r\n  const toggleMute = () => {\r\n    if (streamRef.current) {\r\n      const newMuteState = !isMuted;\r\n      streamRef.current.getAudioTracks().forEach(track => {\r\n        track.enabled = !newMuteState;\r\n      });\r\n      setIsMuted(newMuteState);\r\n      \r\n      // Notify other participants\r\n      socket.emit('participantMuted', { roomId, isMuted: newMuteState });\r\n      \r\n      // Update local muted users\r\n      setMutedUsers(prev => {\r\n        const newSet = new Set(prev);\r\n        if (newMuteState) {\r\n          newSet.add(socket.id);\r\n        } else {\r\n          newSet.delete(socket.id);\r\n        }\r\n        return newSet;\r\n      });\r\n    }\r\n  };\r\n\r\n  const toggleDeafen = () => {\r\n    const newDeafenState = !isDeafened;\r\n    setIsDeafened(newDeafenState);\r\n    \r\n    if (newDeafenState) {\r\n      setIsMuted(true);\r\n      if (streamRef.current) {\r\n        streamRef.current.getAudioTracks().forEach(track => {\r\n          track.enabled = false;\r\n        });\r\n      }\r\n      setMutedUsers(prev => new Set([...prev, socket.id]));\r\n    }\r\n  };\r\n\r\n  const leaveCall = () => {\r\n    socket.emit('leaveCall', { roomId });\r\n    cleanup();\r\n  };\r\n\r\n  const copyRoomId = () => {\r\n    navigator.clipboard.writeText(roomId);\r\n  };\r\n\r\n  // Initialize call\r\n  useEffect(() => {\r\n    const initCall = async () => {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia({ \r\n          audio: {\r\n            echoCancellation: true,\r\n            noiseSuppression: true,\r\n            autoGainControl: true,\r\n            sampleRate: 44100\r\n          }\r\n        });\r\n        \r\n        streamRef.current = stream;\r\n        if (userAudio.current) {\r\n          userAudio.current.srcObject = stream;\r\n        }\r\n\r\n        setupVoiceActivityDetection(stream, socket.id);\r\n        updateAllParticipants();\r\n        setCallStartTime(Date.now());\r\n\r\n        if (callState && callState.participants) {\r\n          callState.participants\r\n            .filter(participantId => participantId !== socket.id)\r\n            .forEach(participantId => {\r\n              const peer = createPeer(participantId, socket.id, stream);\r\n              peersRef.current.push({\r\n                peerID: participantId,\r\n                peer,\r\n                username: users.find(u => u.id === participantId)?.username || 'Unknown',\r\n              });\r\n            });\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error('Error accessing media devices:', err);\r\n      }\r\n    };\r\n\r\n    const handleCallSignal = ({ signal, from }) => {\r\n      if (!streamRef.current) return;\r\n      \r\n      const peerObj = peersRef.current.find(p => p.peerID === from);\r\n      if (peerObj) {\r\n        try {\r\n          peerObj.peer.signal(signal);\r\n        } catch (err) {\r\n          console.error('Error signaling existing peer:', err);\r\n          updateParticipantStatus(from, 'disconnected');\r\n          cleanupPeer(from);\r\n        }\r\n      } else {\r\n        const peer = addPeer(signal, from, streamRef.current);\r\n        peersRef.current.push({\r\n          peerID: from,\r\n          peer,\r\n          username: users.find(u => u.id === from)?.username || 'Unknown',\r\n        });\r\n      }\r\n      updateAllParticipants();\r\n    };\r\n\r\n    const handleParticipantJoined = ({ userId, username: joinedUsername }) => {\r\n      if (userId !== socket.id && streamRef.current) {\r\n        const peer = createPeer(userId, socket.id, streamRef.current);\r\n        peersRef.current.push({\r\n          peerID: userId,\r\n          peer,\r\n          username: joinedUsername,\r\n        });\r\n      }\r\n      updateAllParticipants();\r\n    };\r\n\r\n    const handleParticipantLeft = ({ userId, username: leftUsername }) => {\r\n      cleanupPeer(userId);\r\n      updateParticipantStatus(userId, 'left');\r\n      \r\n      // Add to left participants list\r\n      setLeftParticipants(prev => [\r\n        ...prev.filter(p => p.peerID !== userId),\r\n        {\r\n          peerID: userId,\r\n          username: leftUsername || users.find(u => u.id === userId)?.username || 'Unknown',\r\n          leftTime: Date.now()\r\n        }\r\n      ]);\r\n    };\r\n\r\n    const handleCallEnded = () => {\r\n      cleanup();\r\n      setCallStartTime(null);\r\n      setCallDuration(0);\r\n      setLeftParticipants([]);\r\n    };\r\n\r\n    initCall();\r\n\r\n    socket.on('callSignal', handleCallSignal);\r\n    socket.on('callParticipantJoined', handleParticipantJoined);\r\n    socket.on('callParticipantLeft', handleParticipantLeft);\r\n    socket.on('callEnded', handleCallEnded);\r\n    socket.on('participantMuted', handleParticipantMuted);\r\n\r\n    const interval = setInterval(updateAllParticipants, 5000);\r\n\r\n    return () => {\r\n      cleanup();\r\n      clearInterval(interval);\r\n      socket.off('callSignal', handleCallSignal);\r\n      socket.off('callParticipantJoined', handleParticipantJoined);\r\n      socket.off('callParticipantLeft', handleParticipantLeft);\r\n      socket.off('callEnded', handleCallEnded);\r\n      socket.off('participantMuted', handleParticipantMuted);\r\n    };\r\n  }, [socket, roomId, callState, users, createPeer, addPeer, cleanup, cleanupPeer, updateAllParticipants, setupVoiceActivityDetection]);\r\n\r\n  // Update call duration\r\n  useEffect(() => {\r\n    if (!callStartTime) return;\r\n    \r\n    const interval = setInterval(() => {\r\n      setCallDuration(Math.floor((Date.now() - callStartTime) / 1000));\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, [callStartTime]);\r\n\r\n  // Update audio volumes\r\n  useEffect(() => {\r\n    peersRef.current.forEach(({ peer }) => {\r\n      if (peer.audioElement) {\r\n        peer.audioElement.volume = isDeafened ? 0 : (outputVolume / 100);\r\n      }\r\n    });\r\n  }, [isDeafened, outputVolume]);\r\n\r\n  return (\r\n    <div className={`flex-1 ${currentTheme.card} overflow-hidden flex flex-col relative`}>\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-gray-700 relative\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <div className=\"relative\">\r\n                <Phone className=\"w-5 h-5 text-green-400\" />\r\n                <div className=\"absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse\" />\r\n              </div>\r\n              <div>\r\n                <h2 className={`text-lg font-bold ${currentTheme.textPrimary} gradient-text`}>\r\n                  Voice Call\r\n                </h2>\r\n                <div className=\"text-xs text-gray-400\">\r\n                  Room: {roomId}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {callStartTime && (\r\n              <div className=\"flex items-center space-x-2 text-sm text-gray-400\">\r\n                <Clock className=\"w-4 h-4\" />\r\n                <span>{formatDuration(callDuration)}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-3\">\r\n            <button\r\n              onClick={() => setShowParticipantsList(!showParticipantsList)}\r\n              className=\"flex items-center space-x-2 px-3 py-1 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors\"\r\n            >\r\n              <Users className=\"w-4 h-4\" />\r\n              <span className=\"text-sm\">{participants.length}</span>\r\n              {showParticipantsList ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\r\n            </button>\r\n            \r\n            <button\r\n              onClick={copyRoomId}\r\n              className=\"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors\"\r\n              title=\"Copy Room ID\"\r\n            >\r\n              <Copy className=\"w-4 h-4\" />\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => setShowSettings(!showSettings)}\r\n              className=\"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors\"\r\n            >\r\n              <Settings className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Settings Panel */}\r\n      {showSettings && (\r\n        <div className=\"absolute top-full left-0 right-0 bg-gray-800 border-b border-gray-700 p-4 z-50\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                Microphone Sensitivity\r\n              </label>\r\n              <input\r\n                type=\"range\"\r\n                min=\"5\"\r\n                max=\"50\"\r\n                value={micSensitivity}\r\n                onChange={(e) => setMicSensitivity(parseInt(e.target.value))}\r\n                className=\"w-full\"\r\n              />\r\n              <div className=\"text-xs text-gray-400\">Current: {micSensitivity}</div>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-300 mb-2\">\r\n                Output Volume\r\n              </label>\r\n              <input\r\n                type=\"range\"\r\n                min=\"0\"\r\n                max=\"100\"\r\n                value={outputVolume}\r\n                onChange={(e) => setOutputVolume(parseInt(e.target.value))}\r\n                className=\"w-full\"\r\n              />\r\n              <div className=\"text-xs text-gray-400\">Current: {outputVolume}%</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Participants List */}\r\n      {showParticipantsList && (\r\n        <div className=\"border-b border-gray-700 bg-gray-800/50 p-4 max-h-40 overflow-y-auto\">\r\n          <div className=\"space-y-2\">\r\n            {participants.map(({ peerID, username: participantUsername, isSelf, connectionStatus }) => {\r\n              const profilePic = generateProfilePicture(participantUsername);\r\n              const isSpeaking = speakingUsers.has(peerID);\r\n              const isMutedUser = mutedUsers.has(peerID);\r\n              const audioLevel = audioLevels[peerID] || 0;\r\n              const quality = connectionQuality[peerID] || 'good';\r\n              \r\n              return (\r\n                <div key={peerID} className=\"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-700/50\">\r\n                  <div className=\"relative\">\r\n                    <div \r\n                      className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white\r\n                        ${isSpeaking ? 'ring-2 ring-green-400' : ''}\r\n                      `}\r\n                      style={{ backgroundColor: profilePic.color }}\r\n                    >\r\n                      {profilePic.letter}\r\n                    </div>\r\n                    {isMutedUser && (\r\n                      <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\">\r\n                        <MicOff className=\"w-2 h-2 text-white\" />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className={`text-sm font-medium ${currentTheme.textPrimary} truncate`}>\r\n                        {participantUsername}\r\n                        {isSelf && <span className=\"text-blue-400 ml-1\">(You)</span>}\r\n                      </span>\r\n                      {isSpeaking && (\r\n                        <div className=\"flex items-center space-x-1\">\r\n                          <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\" />\r\n                          <span className=\"text-xs text-green-400\">Speaking</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {/* Audio level indicator */}\r\n                    <div className=\"flex items-center space-x-2 mt-1\">\r\n                      <div className=\"w-16 h-1 bg-gray-600 rounded-full overflow-hidden\">\r\n                        <div \r\n                          className=\"h-full bg-green-400 transition-all duration-150 ease-out\"\r\n                          style={{ width: `${audioLevel}%` }}\r\n                        />\r\n                      </div>\r\n                      <span className=\"text-xs text-gray-400\">{Math.round(audioLevel)}%</span>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div \r\n                      className=\"flex items-center space-x-1\"\r\n                      style={{ color: getConnectionQualityColor(quality) }}\r\n                      title={`Connection: ${quality}`}\r\n                    >\r\n                      {getConnectionQualityIcon(quality)}\r\n                      <span className=\"text-xs capitalize\">{quality}</span>\r\n                    </div>\r\n                    \r\n                    {networkStats[peerID] && (\r\n                      <div className=\"text-xs text-gray-400\" title={`Packet Loss: ${networkStats[peerID].packetLossRate}%`}>\r\n                        {networkStats[peerID].packetLossRate}%\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n            \r\n            {/* Left participants */}\r\n            {leftParticipants.length > 0 && (\r\n              <div className=\"border-t border-gray-600 pt-2 mt-2\">\r\n                <div className=\"text-xs text-gray-400 mb-2 flex items-center space-x-1\">\r\n                  <UserX className=\"w-3 h-3\" />\r\n                  <span>Left the call</span>\r\n                </div>\r\n                {leftParticipants.slice(-3).map(({ peerID, username: leftUsername, leftTime }) => {\r\n                  const profilePic = generateProfilePicture(leftUsername);\r\n                  const timeAgo = Math.floor((Date.now() - leftTime) / 1000);\r\n                  \r\n                  return (\r\n                    <div key={`left-${peerID}`} className=\"flex items-center space-x-3 p-2 rounded-lg opacity-60\">\r\n                      <div \r\n                        className=\"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white opacity-50\"\r\n                        style={{ backgroundColor: profilePic.color }}\r\n                      >\r\n                        {profilePic.letter}\r\n                      </div>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <span className=\"text-sm text-gray-400 truncate\">{leftUsername}</span>\r\n                        <div className=\"text-xs text-gray-500\">\r\n                          Left {timeAgo < 60 ? `${timeAgo}s ago` : `${Math.floor(timeAgo / 60)}m ago`}\r\n                        </div>\r\n                      </div>\r\n                      <UserX className=\"w-4 h-4 text-gray-500\" />\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Participants Grid */}\r\n      <div className=\"flex-1 p-4 overflow-y-auto\">\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\r\n          {participants.map(({ peerID, username: participantUsername, isSelf, connectionStatus }) => {\r\n            const profilePic = generateProfilePicture(participantUsername);\r\n            const isSpeaking = speakingUsers.has(peerID);\r\n            const isMutedUser = mutedUsers.has(peerID);\r\n            const audioLevel = audioLevels[peerID] || 0;\r\n            const quality = connectionQuality[peerID] || 'good';\r\n            \r\n            return (\r\n              <div \r\n                key={`${peerID}-${participantUsername}`}\r\n                className={`\r\n                  relative p-6 rounded-xl transition-all duration-200 border-2 backdrop-blur-sm\r\n                  ${isSpeaking \r\n                    ? 'border-green-400 bg-green-900/20 shadow-lg shadow-green-400/20 scale-105' \r\n                    : 'border-gray-600 bg-gray-800/50 hover:bg-gray-800/70'\r\n                  }\r\n                  ${isSelf ? 'ring-2 ring-blue-400' : ''}\r\n                  hover:border-gray-500 transition-all duration-200\r\n                `}\r\n              >\r\n                {/* Profile Picture */}\r\n                <div className=\"flex flex-col items-center space-y-4\">\r\n                  <div className=\"relative\">\r\n                    <div \r\n                      className={`\r\n                        w-20 h-20 rounded-full flex items-center justify-center text-2xl font-bold text-white\r\n                        ${isSpeaking ? 'ring-4 ring-green-400 ring-opacity-75 animate-pulse' : ''}\r\n                        transition-all duration-200 shadow-lg\r\n                      `}\r\n                      style={{ backgroundColor: profilePic.color }}\r\n                    >\r\n                      {profilePic.letter}\r\n                    </div>\r\n                    \r\n                    {/* Connection Quality Indicator */}\r\n                    <div \r\n                      className=\"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center shadow-lg\"\r\n                      style={{ backgroundColor: getConnectionQualityColor(quality) }}\r\n                      title={`Connection: ${quality}`}\r\n                    >\r\n                      {getConnectionQualityIcon(quality)}\r\n                    </div>\r\n                    \r\n                    {/* Mute Indicator */}\r\n                    {isMutedUser && (\r\n                      <div className=\"absolute -bottom-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg\">\r\n                        <MicOff className=\"w-3 h-3 text-white\" />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* Username and Status */}\r\n                  <div className=\"text-center\">\r\n                    <div className={`${currentTheme.textPrimary} font-medium text-sm mb-1`}>\r\n                      {participantUsername}\r\n                      {isSelf && <span className=\"text-blue-400 ml-1\">(You)</span>}\r\n                    </div>\r\n                    \r\n                    {/* Speaking/Muted Status */}\r\n                    <div className=\"flex items-center justify-center space-x-2 mb-2\">\r\n                      {isSpeaking && !isMutedUser && (\r\n                        <div className=\"flex items-center space-x-1 text-green-400\">\r\n                          <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\" />\r\n                          <span className=\"text-xs font-medium\">Speaking</span>\r\n                        </div>\r\n                      )}\r\n                      {isMutedUser && (\r\n                        <div className=\"flex items-center space-x-1 text-red-400\">\r\n                          <MicOff className=\"w-3 h-3\" />\r\n                          <span className=\"text-xs font-medium\">Muted</span>\r\n                        </div>\r\n                      )}\r\n                      {!isSpeaking && !isMutedUser && (\r\n                        <div className=\"flex items-center space-x-1 text-gray-400\">\r\n                          <Mic className=\"w-3 h-3\" />\r\n                          <span className=\"text-xs\">Listening</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {/* Audio Level Visualization */}\r\n                    <div className=\"w-full\">\r\n                      <div className=\"flex items-center justify-center space-x-1 mb-1\">\r\n                        {[...Array(5)].map((_, i) => (\r\n                          <div\r\n                            key={i}\r\n                            className={`\r\n                              w-1 h-3 rounded-full transition-all duration-150\r\n                              ${audioLevel > (i + 1) * 20 \r\n                                ? (isSpeaking ? 'bg-green-400' : 'bg-blue-400') \r\n                                : 'bg-gray-600'\r\n                              }\r\n                            `}\r\n                            style={{\r\n                              height: audioLevel > (i + 1) * 20 ? `${8 + i * 2}px` : '4px'\r\n                            }}\r\n                          />\r\n                        ))}\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-400\">\r\n                        {Math.round(audioLevel)}%  {quality}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Network Stats */}\r\n                    {networkStats[peerID] && (\r\n                      <div className=\"text-xs text-gray-500 mt-1\">\r\n                        Loss: {networkStats[peerID].packetLossRate}%\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Speaking Animation */}\r\n                {isSpeaking && (\r\n                  <div className=\"absolute inset-0 rounded-xl\">\r\n                    <div className=\"absolute inset-0 bg-green-400/10 rounded-xl animate-pulse\" />\r\n                    <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full\">\r\n                      <div className=\"w-full h-full bg-green-400 rounded-full animate-ping\" />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Enhanced Controls */}\r\n      <div className=\"p-4 border-t border-gray-700 bg-gray-800/50 backdrop-blur-sm\">\r\n        <div className=\"flex items-center justify-center space-x-4\">\r\n          <button\r\n            onClick={toggleMute}\r\n            className={`\r\n              p-4 rounded-full transition-all duration-200 flex items-center space-x-2 shadow-lg\r\n              ${isMuted \r\n                ? 'bg-red-500 hover:bg-red-600 text-white shadow-red-500/25' \r\n                : 'bg-gray-700 hover:bg-gray-600 text-gray-200 shadow-gray-700/25'\r\n              }\r\n              hover:scale-105 active:scale-95\r\n            `}\r\n            title={isMuted ? 'Unmute' : 'Mute'}\r\n          >\r\n            {isMuted ? <MicOff className=\"w-6 h-6\" /> : <Mic className=\"w-6 h-6\" />}\r\n          </button>\r\n          \r\n          <button\r\n            onClick={toggleDeafen}\r\n            className={`\r\n              p-4 rounded-full transition-all duration-200 flex items-center space-x-2 shadow-lg\r\n              ${isDeafened \r\n                ? 'bg-red-500 hover:bg-red-600 text-white shadow-red-500/25' \r\n                : 'bg-gray-700 hover:bg-gray-600 text-gray-200 shadow-gray-700/25'\r\n              }\r\n              hover:scale-105 active:scale-95\r\n            `}\r\n            title={isDeafened ? 'Undeafen' : 'Deafen'}\r\n          >\r\n            {isDeafened ? <VolumeX className=\"w-6 h-6\" /> : <Volume2 className=\"w-6 h-6\" />}\r\n          </button>\r\n          \r\n          <button\r\n            onClick={leaveCall}\r\n            className=\"p-4 bg-red-500 hover:bg-red-600 text-white rounded-full transition-all duration-200 shadow-lg shadow-red-500/25 hover:scale-105 active:scale-95\"\r\n            title=\"Leave Call\"\r\n          >\r\n            <PhoneOff className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Control Labels */}\r\n        <div className=\"flex items-center justify-center space-x-16 mt-3\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-xs text-gray-400 font-medium\">\r\n              {isMuted ? 'Unmute' : 'Mute'}\r\n            </div>\r\n            <div className=\"text-xs text-gray-500\">\r\n              {isMuted ? 'Ctrl+M' : 'Ctrl+M'}\r\n            </div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-xs text-gray-400 font-medium\">\r\n              {isDeafened ? 'Undeafen' : 'Deafen'}\r\n            </div>\r\n            <div className=\"text-xs text-gray-500\">\r\n              {isDeafened ? 'Ctrl+D' : 'Ctrl+D'}\r\n            </div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-xs text-gray-400 font-medium\">\r\n              Leave\r\n            </div>\r\n            <div className=\"text-xs text-gray-500\">\r\n              Ctrl+L\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Call Stats */}\r\n        <div className=\"flex items-center justify-center space-x-6 mt-3 text-xs text-gray-400\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Users className=\"w-3 h-3\" />\r\n            <span>{participants.length} participants</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Clock className=\"w-3 h-3\" />\r\n            <span>{formatDuration(callDuration)}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Signal className=\"w-3 h-3\" />\r\n            <span>Quality: {Object.values(connectionQuality).filter(q => q === 'excellent' || q === 'good').length}/{participants.length - 1}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Hidden audio element for self */}\r\n      <audio ref={userAudio} autoPlay muted />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CallRoom;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}